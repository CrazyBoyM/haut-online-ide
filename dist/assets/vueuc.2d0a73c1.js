import{o as H,a as K}from"./evtd.5b1ed12a.js";import{A as G,d as J,z as P}from"./seemly.fe27fe31.js";import{d as L,p as ue,g as fe,i as X,r as A,o as Q,q as Z,t as F,c as O,h as B,x as he,k as j,w as V,n as R,b as ee,l as pe}from"./@vue.66a8848f.js";import{u as N}from"./@css-render.1e31daa0.js";import{h as ce,u as Y,o as me,i as ve}from"./vooks.f7a6d048.js";import{z as be}from"./vdirs.373736d2.js";import{i as ge}from"./resize-observer-polyfill.8deb1e21.js";import{C as we}from"./css-render.7bbe45e9.js";function D(n,e="default"){const t=n[e];if(t===void 0)throw new Error(`[vueuc/binder]: slot[${e}] is empty.`);return t()}function te(n,e="default"){const t=n[e];if(t===void 0)throw new Error(`[vueuc/binder]: slot[${e}] is empty.`);const o=t();if(o.length===1)return o[0];throw new Error(`[vueuc/binder]: slot[${e}] should have exactly one child.`)}let E=null;function ne(){if(E===null&&(E=document.getElementById("v-binder-view-measurer"),E===null)){E=document.createElement("div"),E.id="v-binder-view-measurer";const{style:n}=E;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(E)}return E.getBoundingClientRect()}function xe(n,e){const t=ne();return{top:e,left:n,height:0,width:0,right:t.width-n,bottom:t.height-e}}function U(n){const e=n.getBoundingClientRect(),t=ne();return{left:e.left-t.left,top:e.top-t.top,bottom:t.height+t.top-e.bottom,right:t.width+t.left-e.right,width:e.width,height:e.height}}function ye(n){return n.nodeType===9?null:n.parentNode}function oe(n){if(n===null)return null;const e=ye(n);if(e===null)return null;if(e.nodeType===9)return document;if(e.nodeType===1){const{overflow:t,overflowX:o,overflowY:l}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+l+o))return e}return oe(e)}const $e=L({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var e;ue("VBinder",(e=fe())===null||e===void 0?void 0:e.proxy);const t=X("VBinder",null),o=A(null),l=r=>{o.value=r,t&&n.syncTargetWithParent&&t.setTargetRef(r)};let u=[];const p=()=>{let r=o.value;for(;r=oe(r),r!==null;)u.push(r);for(const w of u)K("scroll",w,g,!0)},c=()=>{for(const r of u)H("scroll",r,g,!0);u=[]},d=new Set,h=r=>{d.size===0&&p(),d.has(r)||d.add(r)},M=r=>{d.has(r)&&d.delete(r),d.size===0&&c()},g=()=>{G(a)},a=()=>{d.forEach(r=>r())},b=new Set,S=r=>{b.size===0&&K("resize",window,z),b.has(r)||b.add(r)},I=r=>{b.has(r)&&b.delete(r),b.size===0&&H("resize",window,z)},z=()=>{b.forEach(r=>r())};return Q(()=>{H("resize",window,z),c()}),{targetRef:o,setTargetRef:l,addScrollListener:h,removeScrollListener:M,addResizeListener:S,removeResizeListener:I}},render(){return D(this.$slots)}});var Ye=$e,De=L({name:"Target",setup(){const{setTargetRef:n,syncTarget:e}=X("VBinder");return{syncTarget:e,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:e}=this;return n?Z(te(this.$slots),[[e]]):te(this.$slots)}});function re(n,e){console.error(`[vueuc/${n}]: ${e}`)}const{c:k}=we();function ie(n){return n&-n}class Me{constructor(e,t){this.l=e,this.min=t;const o=new Array(e+1);for(let l=0;l<e+1;++l)o[l]=0;this.ft=o}add(e,t){if(t===0)return;const{l:o,ft:l}=this;for(e+=1;e<=o;)l[e]+=t,e+=ie(e)}get(e){return this.sum(e+1)-this.sum(e)}sum(e){if(e===0)return 0;const{ft:t,min:o,l}=this;if(e===void 0&&(e=l),e>l)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let u=e*o;for(;e>0;)u+=t[e],e-=ie(e);return u}getBound(e){let t=0,o=this.l;for(;o>t;){const l=Math.floor((t+o)/2),u=this.sum(l);if(u>e){o=l;continue}else if(u<e){if(t===l)return this.sum(t+1)<=e?t+1:l;t=l}else return l}return t}}var ze=L({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(n){return{showTeleport:ce(F(n,"show")),mergedTo:O(()=>{const{to:e}=n;return e!=null?e:"body"})}},render(){return this.showTeleport?this.disabled?D(this.$slots):B(he,{disabled:this.disabled,to:this.mergedTo},D(this.$slots)):null}});const _={top:"bottom",bottom:"top",left:"right",right:"left"},se={start:"end",center:"center",end:"start"},q={top:"height",bottom:"height",left:"width",right:"width"},Se={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},Te={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},Be={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"};function Ie(n,e,t,o,l){if(!o||l)return n;const[u,p]=n.split("-");let c=p!=null?p:"center";if(p!=="center"){const h=Be[n],M=_[h],g=q[h];t[g]>e[g]&&e[h]+e[g]<=t[g]&&e[h]<e[M]&&(c=se[p]),t[g]<e[g]&&e[M]<0&&e[h]>e[M]&&(c=se[p])}let d=u;return!(e[u]>=t[q[u]])&&e[_[u]]>=t[q[u]]&&(d=_[u]),c!=="center"?`${d}-${c}`:d}function Ae(n,e){return e?Te[n]:Se[n]}function Ee(n,e,t,o){if(o)switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"top-end":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"left-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:""};case"right-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%)"}}}const ke=k([k(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),k(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[k("> *",{pointerEvents:"all"})])]);var Ue=L({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const e=X("VBinder"),t=Y(()=>n.enabled!==void 0?n.enabled:n.show),o=A(null),l=A(null),u=()=>{const{syncTrigger:a}=n;a.includes("scroll")&&e.addScrollListener(d),a.includes("resize")&&e.addResizeListener(d)},p=()=>{e.removeScrollListener(d),e.removeResizeListener(d)};j(()=>{t.value&&(d(),u())});const c=N();ke.mount({id:"vueuc/binder",head:!0,ssr:c}),Q(()=>{p()}),me(()=>{t.value&&d()});const d=()=>{if(!t.value)return;const a=o.value;if(a===null)return;const b=e.targetRef,{x:S,y:I,overlap:z}=n,r=S!==void 0&&I!==void 0?xe(S,I):U(b),{width:w,minWidth:T,placement:i,flip:s}=n;a.setAttribute("v-placement",i),z?a.setAttribute("v-overlap",""):a.removeAttribute("v-overlap");const{style:f}=a;w==="target"?f.width=`${r.width}px`:w!==void 0?f.width=w:f.width="",T==="target"?f.minWidth=`${r.width}px`:T!==void 0?f.minWidth=T:f.minWidth="";const m=U(a),v=U(l.value),x=Ie(i,r,m,s,z),y=Ae(x,z),{left:$,top:W,transform:ae}=Ee(x,v,r,z);a.setAttribute("v-placement",x),a.style.transform=`translateX(${$}) translateY(${W}) ${ae}`,a.style.transformOrigin=y};V(t,a=>{a?(u(),h()):p()});const h=()=>{R().then(d).catch(a=>console.error(a))};["placement","x","y","flip","width","overlap","minWidth"].forEach(a=>{V(F(n,a),d)}),["teleportDisabled"].forEach(a=>{V(F(n,a),h)}),V(F(n,"syncTrigger"),a=>{a.includes("resize")?e.addResizeListener(d):e.removeResizeListener(d),a.includes("scroll")?e.addScrollListener(d):e.removeScrollListener(d)});const M=ve(),g=Y(()=>{const{to:a}=n;if(a!==void 0)return a;!M.value});return{VBinder:e,mergedEnabled:t,offsetContainerRef:l,followerRef:o,mergedTo:g,syncPosition:d}},render(){return B(ze,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{const n=B("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[B("div",{class:"v-binder-follower-content",ref:"followerRef"},this.$slots)]);return this.zindexable?Z(n,[[be,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):n}})}});class Le{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new ge(this.handleResize),this.elHandlersMap=new Map}handleResize(e){for(const t of e){const o=this.elHandlersMap.get(t.target);o!==void 0&&o(t)}}registerHandler(e,t){this.elHandlersMap.set(e,t),this.observer.observe(e)}unregisterHandler(e){!this.elHandlersMap.has(e)||(this.elHandlersMap.delete(e),this.observer.unobserve(e))}}var le=new Le,de=L({name:"ResizeObserver",props:{onResize:Function},setup(n){return{registered:!1,handleResize(e){const{onResize:t}=n;t!==void 0&&t(e)}}},mounted(){const n=this.$el;n===void 0?re("resize-observer","$el does not exist."):n.nextElementSibling!==n.nextSibling?re("resize-observer","$el can not be observed (it may be a text node)."):n.nextElementSibling!==null&&(le.registerHandler(n.nextElementSibling,this.handleResize),this.registered=!0)},beforeUnmount(){this.registered&&le.unregisterHandler(this.$el.nextElementSibling)},render(){return ee(this.$slots,"default")}});const Ce=k(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[k("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[k("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]);var _e=L({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(n){const e=N();Ce.mount({id:"vueuc/virtual-list",head:!0,ssr:e}),j(()=>{const{defaultScrollIndex:i,defaultScrollKey:s}=n;i!=null?g({index:i}):s!=null&&g({key:s})});const t=O(()=>{const i=new Map,{keyField:s}=n;return n.items.forEach((f,m)=>{i.set(f[s],m)}),i}),o=A(null),l=A(void 0),u=new Map,p=O(()=>{const{items:i,itemSize:s,keyField:f}=n,m=new Me(i.length,s);return i.forEach((v,x)=>{const y=v[f],$=u.get(y);$!==void 0&&m.add(x,$)}),m}),c=A(0),d=A(0),h=Y(()=>Math.max(p.value.getBound(d.value-J(n.paddingTop))-1,0)),M=O(()=>{const{value:i}=l;if(i===void 0)return[];const{items:s,itemSize:f}=n,m=h.value,v=Math.min(m+Math.ceil(i/f+1),s.length-1),x=[];for(let y=m;y<=v;++y)x.push(s[y]);return x}),g=i=>{const{left:s,top:f,index:m,key:v,position:x,behavior:y,debounce:$=!0}=i;if(s!==void 0||f!==void 0)b(s,f,y);else if(m!==void 0)a(m,y,$);else if(v!==void 0){const W=t.value.get(v);W!==void 0&&a(W,y,$)}else x==="bottom"?b(0,Number.MAX_SAFE_INTEGER,y):x==="top"&&b(0,0,y)};function a(i,s,f){const{value:m}=p,v=m.sum(i)+J(n.paddingTop);if(!f)o.value.scrollTo({left:0,top:v,behavior:s});else{const{scrollTop:x,offsetHeight:y}=o.value;if(v>x){const $=m.get(i);v+$<=x+y||o.value.scrollTo({left:0,top:v+$-y,behavior:s})}else o.value.scrollTo({left:0,top:v,behavior:s})}r=i}function b(i,s,f){o.value.scrollTo({left:i,top:s,behavior:f})}function S(i,s){var f;if(n.ignoreItemResize)return;const{value:m}=p,v=t.value.get(i),x=s.target.offsetHeight;x-n.itemSize===0?u.delete(i):u.set(i,x-n.itemSize);const $=x-m.get(v);$!==0&&(w!==void 0&&v<=w&&((f=o.value)===null||f===void 0||f.scrollBy(0,$)),m.add(v,$),c.value++)}function I(i){G(T);const{onScroll:s}=n;s!==void 0&&s(i)}function z(i){l.value=i.contentRect.height;const{onResize:s}=n;s!==void 0&&s(i)}let r,w;function T(){const{value:i}=o;i!=null&&(w=r!=null?r:h.value,r=void 0,d.value=o.value.scrollTop)}return{listHeight:l,listStyle:{overflow:"auto"},keyToIndex:t,itemsStyle:O(()=>{const{itemResizable:i}=n,s=P(p.value.sum());return c.value,[n.itemsStyle,{boxSizing:"content-box",height:i?"":s,minHeight:i?s:"",paddingTop:P(n.paddingTop),paddingBottom:P(n.paddingBottom)}]}),visibleItemsStyle:O(()=>(c.value,{transform:`translate3d(0, ${P(p.value.sum(h.value))}, 0)`})),viewportItems:M,listElRef:o,itemsElRef:A(null),scrollTo:g,handleListResize:z,handleListScroll:I,handleItemResize:S}},render(){const{itemResizable:n,keyField:e,keyToIndex:t,visibleItemsTag:o}=this;return B(de,{onResize:this.handleListResize},{default:()=>{var l,u;return B("div",pe(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.onWheel,ref:"listElRef"}),[this.items.length!==0?B("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[B(o,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(p=>{const c=p[e],d=t.get(c),h=this.$slots.default({item:p,index:d})[0];return n?B(de,{key:c,onResize:M=>this.handleItemResize(c,M)},{default:()=>h}):(h.key=c,h)})})]):(u=(l=this.$slots).empty)===null||u===void 0?void 0:u.call(l)])}})}});const C="v-hidden",Oe=k("[v-hidden]",{display:"none!important"});var qe=L({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateOverflow:Function},setup(n,{slots:e}){const t=A(null),o=A(null);function l(){const{value:p}=t,{getCounter:c,getTail:d}=n;let h;if(c!==void 0?h=c():h=o.value,!p||!h)return;h.hasAttribute(C)&&h.removeAttribute(C);const{children:M}=p,g=p.offsetWidth,a=[],b=e.tail?d==null?void 0:d():null;let S=b?b.offsetWidth:0,I=!1;const z=p.children.length-(e.tail?1:0);for(let w=0;w<z-1;++w){if(w<0)continue;const T=M[w];if(I){T.hasAttribute(C)||T.setAttribute(C,"");continue}else T.hasAttribute(C)&&T.removeAttribute(C);const i=T.offsetWidth;if(S+=i,a[w]=i,S>g){const{updateCounter:s}=n;for(let f=w;f>=0;--f){const m=z-1-f;s!==void 0?s(m):h.textContent=`${m}`;const v=h.offsetWidth;if(S-=a[f],S+v<=g||f===0){I=!0,w=f-1,b&&(w===-1?(b.style.maxWidth=`${g-v}px`,b.style.boxSizing="border-box"):b.style.maxWidth="");break}}}}const{onUpdateOverflow:r}=n;I?r!==void 0&&r(!0):(r!==void 0&&r(!1),h.setAttribute(C,""))}const u=N();return Oe.mount({id:"vueuc/overflow",head:!0,ssr:u}),j(l),{selfRef:t,counterRef:o,sync:l}},render(){const{$slots:n}=this;return R(this.sync),B("div",{class:"v-overflow",ref:"selfRef"},[ee(n,"default"),n.counter?n.counter():B("span",{style:{display:"inline-block"},ref:"counterRef"}),n.tail?n.tail():null])}});export{ze as L,de as V,_e as a,Ue as b,De as c,Ye as d,qe as e};
